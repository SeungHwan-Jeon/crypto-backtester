(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9784:(e,t,s)=>{Promise.resolve().then(s.bind(s,4307))},4307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(5155),i=s(2115),l=s(1946),n=s.n(l);function r(e){let{initialAsset:t,setInitialAsset:s,leverage:i,setLeverage:l,feeRate:r,setFeeRate:o}=e;return(0,a.jsxs)("div",{className:n().card,children:[(0,a.jsx)("h2",{className:n().title,children:"설정"}),(0,a.jsxs)("div",{className:n().formGroup,children:[(0,a.jsx)("label",{className:n().label,children:"초기 자산 ($)"}),(0,a.jsx)("input",{type:"number",className:n().input,value:t,onChange:e=>s(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:n().formGroup,children:[(0,a.jsx)("label",{className:n().label,children:"레버리지"}),(0,a.jsx)("input",{type:"number",className:n().input,value:i,onChange:e=>l(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:n().formGroup,children:[(0,a.jsx)("label",{className:n().label,children:"수수료율 (%)"}),(0,a.jsx)("input",{type:"number",className:n().input,value:r,onChange:e=>o(Number(e.target.value))})]})]})}var o=s(748),c=s.n(o);function d(e){let{feeRate:t,addPosition:s}=e,[l,n]=(0,i.useState)(0),[r,o]=(0,i.useState)(0),[d,u]=(0,i.useState)("long");return(0,a.jsxs)("div",{className:c().card,children:[(0,a.jsx)("h2",{className:c().title,children:"거래 입력"}),(0,a.jsxs)("div",{className:c().formGroup,children:[(0,a.jsx)("label",{className:c().label,children:"포지션 타입"}),(0,a.jsxs)("select",{className:c().select,value:d,onChange:e=>u(e.target.value),children:[(0,a.jsx)("option",{value:"long",children:"롱"}),(0,a.jsx)("option",{value:"short",children:"숏"})]})]}),(0,a.jsxs)("div",{className:c().formGroup,children:[(0,a.jsx)("label",{className:c().label,children:"거래 가격"}),(0,a.jsx)("input",{type:"number",className:c().input,value:l,onChange:e=>n(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:c().formGroup,children:[(0,a.jsx)("label",{className:c().label,children:"거래 금액 ($)"}),(0,a.jsx)("input",{type:"number",className:c().input,value:r,onChange:e=>o(Number(e.target.value))})]}),(0,a.jsx)("button",{className:c().button,onClick:()=>{if(l<=0||r<=0){alert("거래 가격과 거래 금액은 0보다 커야 합니다.");return}let e=r*t/100,a=r-e;s({price:l,amount:a,remainingAmount:a,fee:e,partialExits:[],type:d,feeRate:t}),n(0),o(0)},children:"포지션 추가"})]})}var u=s(7258),_=s.n(u);function m(e){let{onPartialExit:t}=e,[s,l]=(0,i.useState)(0),[n,r]=(0,i.useState)(0);return(0,a.jsxs)("div",{className:_().container,children:[(0,a.jsx)("h4",{className:_().title,children:"분할 청산"}),(0,a.jsxs)("div",{className:_().formGroup,children:[(0,a.jsx)("label",{className:_().label,children:"청산 가격"}),(0,a.jsx)("input",{type:"number",className:_().input,value:s,onChange:e=>l(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:_().formGroup,children:[(0,a.jsx)("label",{className:_().label,children:"청산 퍼센트 (%)"}),(0,a.jsx)("input",{type:"number",className:_().input,value:n,onChange:e=>r(Number(e.target.value))})]}),(0,a.jsx)("button",{className:_().button,onClick:()=>{if(s<=0||n<=0||n>100){alert("유효한 청산 가격과 퍼센트를 입력하세요.");return}t(s,n),l(0),r(0)},children:"분할 청산"})]})}var p=s(5621),x=s.n(p);function h(e){let{index:t,position:s,positions:i,updatePositions:l,leverage:n}=e,r=()=>{let e=0;return s.partialExits.forEach(t=>{e+=t.pnl}),e-=s.fee};return(0,a.jsxs)("div",{className:x().card,children:[(0,a.jsxs)("h3",{className:x().title,children:["포지션 ",t+1," - ","long"===s.type?"롱":"숏"]}),(0,a.jsxs)("p",{children:["진입 가격: ",s.price]}),(0,a.jsxs)("p",{children:["총 금액: $",s.amount.toFixed(2)]}),(0,a.jsxs)("p",{children:["남은 금액: $",s.remainingAmount.toFixed(2)]}),(0,a.jsxs)("p",{children:["진입 수수료: $",s.fee.toFixed(2)]}),(0,a.jsx)(m,{onPartialExit:(e,s)=>{let a;let r=[...i],o=r[t],c=o.remainingAmount*(s/100),d=c*o.feeRate/100,u=c-d;o.remainingAmount-=c,a="long"===o.type?(e-o.price)/o.price*u*n:(o.price-e)/o.price*u*n,o.partialExits.push({price:e,amount:u,fee:d,pnl:a}),o.remainingAmount<=0&&(o.isClosed=!0),l(r)}}),s.partialExits.length>0&&(0,a.jsxs)("div",{className:x().exitHistory,children:[(0,a.jsx)("h4",{className:x().subtitle,children:"청산 내역"}),s.isClosed&&(0,a.jsx)("p",{className:x().closedMessage,children:"포지션이 종료되었습니다."}),(0,a.jsxs)("table",{className:x().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"가격"}),(0,a.jsx)("th",{children:"금액 ($)"}),(0,a.jsx)("th",{children:"수수료 ($)"}),(0,a.jsx)("th",{children:"손익 ($)"})]})}),(0,a.jsx)("tbody",{children:s.partialExits.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.price}),(0,a.jsx)("td",{children:e.amount.toFixed(2)}),(0,a.jsx)("td",{children:e.fee.toFixed(2)}),(0,a.jsx)("td",{children:e.pnl.toFixed(2)})]},t))})]})]}),s.isClosed&&(0,a.jsxs)("div",{className:x().pnlContainer,children:[(0,a.jsx)("p",{className:x().pnlLabel,children:"포지션 손익:"}),(0,a.jsxs)("p",{className:"".concat(x().pnlValue," ").concat(r()>=0?x().profit:x().loss),children:["$",r().toFixed(2)]})]})]})}var j=s(4466),N=s.n(j);function b(e){let{positions:t,updatePositions:s,leverage:i}=e,l=t.filter(e=>!e.isClosed),n=t.filter(e=>e.isClosed);return(0,a.jsxs)("div",{className:N().container,children:[(0,a.jsx)("h2",{className:N().title,children:"포지션 목록"}),0===l.length?(0,a.jsx)("p",{className:N().emptyText,children:"오픈된 포지션이 없습니다."}):l.map((e,l)=>(0,a.jsx)(h,{index:t.indexOf(e),position:e,positions:t,updatePositions:s,leverage:i},l)),n.length>0&&(0,a.jsxs)("div",{className:N().closedPositions,children:[(0,a.jsx)("h3",{className:N().subtitle,children:"종료된 포지션"}),n.map((e,l)=>(0,a.jsx)(h,{index:t.indexOf(e),position:e,positions:t,updatePositions:s,leverage:i},l))]})]})}var f=s(6300),v=s.n(f);function g(e){let{positions:t,leverage:s,initialAsset:i}=e,{totalPnL:l,wins:n,losses:r,winRate:o,finalAsset:c}=(()=>{let e=0,s=0,a=0;t.forEach(t=>{if(t.isClosed){let i=0;t.partialExits.forEach(e=>{i+=e.pnl}),i-=t.fee,e+=i,i>=0?s+=1:a+=1}});let l=s+a>0?s/(s+a)*100:0,n=i+e;return{totalPnL:e,wins:s,losses:a,winRate:l,finalAsset:n}})();return(0,a.jsxs)("div",{className:v().card,children:[(0,a.jsx)("h2",{className:v().title,children:"총 손익 및 통계"}),(0,a.jsxs)("div",{className:v().statItem,children:[(0,a.jsx)("span",{children:"총 손익:"}),(0,a.jsxs)("span",{className:"".concat(v().amount," ").concat(l>=0?v().profit:v().loss),children:["$",l.toFixed(2)]})]}),(0,a.jsxs)("div",{className:v().statItem,children:[(0,a.jsx)("span",{children:"승리 수:"}),(0,a.jsx)("span",{children:n})]}),(0,a.jsxs)("div",{className:v().statItem,children:[(0,a.jsx)("span",{children:"패배 수:"}),(0,a.jsx)("span",{children:r})]}),(0,a.jsxs)("div",{className:v().statItem,children:[(0,a.jsx)("span",{children:"승률:"}),(0,a.jsxs)("span",{children:[o.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:v().statItem,children:[(0,a.jsx)("span",{children:"최종 자산:"}),(0,a.jsxs)("span",{children:["$",c.toFixed(2)]})]})]})}var P=s(5717),I=s.n(P);function C(){let[e,t]=(0,i.useState)(0),[s,l]=(0,i.useState)(1),[n,o]=(0,i.useState)(.1),[c,u]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=localStorage.getItem("backtesterData");if(e){let s=JSON.parse(e);t(s.initialAsset||0),l(s.leverage||1),o(s.feeRate||.1),u(s.positions||[])}},[]),(0,i.useEffect)(()=>{localStorage.setItem("backtesterData",JSON.stringify({initialAsset:e,leverage:s,feeRate:n,positions:c}))},[e,s,n,c]),(0,a.jsxs)("div",{className:I().container,children:[(0,a.jsx)("h1",{className:I().title,children:"가상화폐 백테스트 계산기"}),(0,a.jsx)(r,{initialAsset:e,setInitialAsset:t,leverage:s,setLeverage:l,feeRate:n,setFeeRate:o}),(0,a.jsx)(d,{feeRate:n,addPosition:e=>{u([...c,e])}}),(0,a.jsx)(b,{positions:c,updatePositions:e=>{u(e)},leverage:s}),(0,a.jsx)(g,{positions:c,leverage:s,initialAsset:e})]})}},7258:e=>{e.exports={container:"PartialExitForm_container__KCSlF",title:"PartialExitForm_title__tRCw2",formGroup:"PartialExitForm_formGroup__CDk7q",label:"PartialExitForm_label__rZC28",input:"PartialExitForm_input__rVQok",button:"PartialExitForm_button__sf0YC"}},5621:e=>{e.exports={card:"PositionItem_card__5lsbc",title:"PositionItem_title__td54O",subtitle:"PositionItem_subtitle__wiwpn",exitHistory:"PositionItem_exitHistory__RIGVR",table:"PositionItem_table__J1kVq",closedMessage:"PositionItem_closedMessage__0RwP0",pnlContainer:"PositionItem_pnlContainer__h7Pbl",pnlLabel:"PositionItem_pnlLabel__t9EO6",pnlValue:"PositionItem_pnlValue__s__3h",profit:"PositionItem_profit__Z_KHz",loss:"PositionItem_loss__G9m4D"}},4466:e=>{e.exports={container:"PositionList_container__c97Oa",title:"PositionList_title__xKbjA",emptyText:"PositionList_emptyText__Cp4yA",closedPositions:"PositionList_closedPositions__osWi5",subtitle:"PositionList_subtitle__kzAxQ"}},1946:e=>{e.exports={card:"Settings_card__Ga0IN",title:"Settings_title__y3jk2",formGroup:"Settings_formGroup__E6_56",label:"Settings_label__nxs_r",input:"Settings_input__vaB7U"}},6300:e=>{e.exports={card:"TotalPnL_card__mM7f7",title:"TotalPnL_title__zNXCI",statItem:"TotalPnL_statItem__pe9ya",amount:"TotalPnL_amount__4L__I",profit:"TotalPnL_profit__7asan",loss:"TotalPnL_loss__sMs1H"}},748:e=>{e.exports={card:"TradeInput_card__QCqD8",title:"TradeInput_title__HYtWc",formGroup:"TradeInput_formGroup__cBCMf",label:"TradeInput_label__D3TFi",input:"TradeInput_input__jcX_m",select:"TradeInput_select__UECwf",button:"TradeInput_button__XY91P"}},5717:e=>{e.exports={container:"page_container__jZF7q",title:"page_title__po7na"}}},e=>{var t=t=>e(e.s=t);e.O(0,[633,441,517,358],()=>t(9784)),_N_E=e.O()}]);