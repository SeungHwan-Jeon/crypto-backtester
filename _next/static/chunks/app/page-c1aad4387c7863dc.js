(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9784:(e,t,s)=>{Promise.resolve().then(s.bind(s,4307))},4307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(5155),n=s(2115),i=s(1946),l=s.n(i);function r(e){let{initialAsset:t,setInitialAsset:s,isTrading:n,startTrading:i,resetSettings:r,stopTrading:o}=e;return(0,a.jsxs)("div",{className:l().card,children:[(0,a.jsx)("h2",{className:l().title,children:"설정"}),(0,a.jsxs)("div",{className:l().formGroup,children:[(0,a.jsx)("label",{className:l().label,children:"초기 자산 ($)"}),(0,a.jsx)("input",{type:"number",className:l().input,value:t,onChange:e=>s(Number(e.target.value)),disabled:n})]}),(0,a.jsxs)("div",{className:l().buttonGroup,children:[n?(0,a.jsx)("button",{className:l().stopButton,onClick:o,children:"거래 중지"}):(0,a.jsx)("button",{className:l().startButton,onClick:i,children:"거래 시작"}),(0,a.jsx)("button",{className:l().resetButton,onClick:r,children:"초기화"})]})]})}var o=s(748),c=s.n(o);function d(e){let{feeRate:t,setFeeRate:s,leverage:i,setLeverage:l,addPosition:r,initialAsset:o,currentAsset:d,usedMargin:u}=e,[_,m]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[h,j]=(0,n.useState)("long"),g=d*i;return(0,a.jsxs)("div",{className:c().card,children:[(0,a.jsx)("h2",{className:c().title,children:"거래 입력"}),(0,a.jsxs)("div",{className:c().typeSelector,children:[(0,a.jsx)("button",{className:"".concat(c().typeButton," ").concat("long"===h?c().selectedLong:c().long),onClick:()=>j("long"),children:"롱"}),(0,a.jsx)("button",{className:"".concat(c().typeButton," ").concat("short"===h?c().selectedShort:c().short),onClick:()=>j("short"),children:"숏"})]}),(0,a.jsxs)("div",{className:c().formGroup,children:[(0,a.jsx)("label",{className:c().label,children:"레버리지"}),(0,a.jsx)("input",{type:"number",className:c().input,value:i,onChange:e=>l(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:c().formGroup,children:[(0,a.jsx)("label",{className:c().label,children:"수수료율 (%)"}),(0,a.jsx)("input",{type:"number",className:c().input,value:t,onChange:e=>s(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:c().formGroup,children:[(0,a.jsx)("label",{className:c().label,children:"거래 가격"}),(0,a.jsx)("input",{type:"number",className:c().input,value:_,onChange:e=>m(e.target.value)})]}),(0,a.jsxs)("div",{className:c().formGroup,children:[(0,a.jsx)("label",{className:c().label,children:"거래 금액 ($)"}),(0,a.jsx)("input",{type:"number",className:c().input,value:p,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)("p",{className:c().maxInfo,children:["최대 거래 가능 금액: $",g.toFixed(2)]}),(0,a.jsxs)("p",{className:c().maxInfo,children:["사용 가능한 자산: $",d.toFixed(2)]}),(0,a.jsx)("button",{className:c().submitButton,onClick:()=>{let e=parseFloat(p),s=parseFloat(_);if(isNaN(e)||isNaN(s)){alert("거래 가격과 거래 금액을 올바르게 입력해주세요.");return}if(e<=0||s<=0){alert("거래 가격과 거래 금액은 0보다 커야 합니다.");return}let a=e/i;if(a>d){alert("거래 금액이 최대 가능 금액을 초과합니다. 최대 거래 가능 금액은 $".concat(g.toFixed(2),"입니다."));return}let n=e*t/100,l=e-n;r({price:s,amount:l,remainingAmount:l,fee:n,partialExits:[],type:h,feeRate:t,margin:a}),m(""),x("")},children:"포지션 추가"})]})}var u=s(7258),_=s.n(u);function m(e){let{onPartialExit:t,remainingAmount:s}=e,[i,l]=(0,n.useState)(""),[r,o]=(0,n.useState)("50"),c=e=>{o(String(Math.min(100,Math.max(0,Number(e)))))};return(0,a.jsxs)("div",{className:_().container,children:[(0,a.jsx)("h4",{className:_().title,children:"분할 청산"}),(0,a.jsxs)("div",{className:_().formGroup,children:[(0,a.jsx)("label",{className:_().label,children:"청산 가격"}),(0,a.jsx)("input",{type:"number",className:_().input,value:i,onChange:e=>l(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:_().formGroup,children:[(0,a.jsx)("label",{className:_().label,children:"청산 비율"}),(0,a.jsxs)("div",{className:_().percentageInputGroup,children:[(0,a.jsx)("input",{type:"number",className:_().percentageInput,value:r,onChange:e=>c(e.target.value),min:"0",max:"100"}),(0,a.jsx)("span",{className:_().percentageSymbol,children:"%"})]}),(0,a.jsxs)("div",{className:_().rangeContainer,children:[(0,a.jsx)("input",{type:"range",className:_().rangeInput,min:"0",max:"100",value:r,onChange:e=>o(e.target.value)}),(0,a.jsxs)("div",{className:_().rangeLabels,children:[(0,a.jsx)("span",{children:"0%"}),(0,a.jsx)("span",{children:"50%"}),(0,a.jsx)("span",{children:"100%"})]})]}),(0,a.jsxs)("div",{className:_().exitAmountInfo,children:["청산 금액: $",(s*Number(r)/100).toFixed(2)]})]}),(0,a.jsx)("button",{className:_().button,onClick:()=>{let e=Number(i),s=Number(r);if(e<=0){alert("청산 가격은 0보다 커야 합니다.");return}t(e,s),l(""),o("50")},children:"분할 청산"})]})}var p=s(5621),x=s.n(p);function h(e){let{index:t,position:s,positions:i,updatePositions:l,leverage:r,deletePosition:o,updateUsedMargin:c,setCurrentAsset:d}=e,[u,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s.isClosed&&!s.assetUpdated&&(c(-s.margin),s.assetUpdated=!0)},[s.isClosed]);let p=()=>{let e=0;return s.partialExits.forEach(t=>{e+=t.pnl}),e-=s.fee,s.partialExits.forEach(t=>{e-=t.fee}),e},h=e=>{let s=[...i],a=s[t],n=a.partialExits[e];a.remainingAmount+=n.amount,a.partialExits.splice(e,1),d(e=>e-n.pnl+n.fee),0===a.partialExits.length&&(a.isClosed=!1,a.assetUpdated=!1,c(a.margin)),l(s)},j=e=>e*s.feeRate/100,g=(e,t,s,a)=>"long"===a?s*(t-e)/e:s*(e-t)/e;return(0,a.jsxs)("div",{className:x().card,children:[(0,a.jsxs)("div",{className:x().summary,onClick:()=>_(!u),children:[(0,a.jsxs)("h3",{className:x().title,children:["포지션 ",t+1," - ","long"===s.type?"롱":"숏"]}),(0,a.jsxs)("p",{children:["진입 가격: ",s.price]}),(0,a.jsxs)("p",{children:["상태:"," ",s.isClosed?(0,a.jsx)("span",{className:x().closed,children:"종료"}):(0,a.jsx)("span",{className:x().open,children:"진행 중"})]})]}),u&&(0,a.jsxs)("div",{className:x().details,children:[(0,a.jsxs)("p",{children:["총 금액: $",s.amount.toFixed(2)]}),(0,a.jsxs)("p",{children:["남은 금액: $",s.remainingAmount.toFixed(2)]}),(0,a.jsxs)("p",{children:["진입 수수료: $",s.fee.toFixed(2)]}),!s.isClosed&&(0,a.jsx)(m,{onPartialExit:(e,a)=>{let n=s.remainingAmount*a/100,r=j(n),o=n-r,u=g(s.price,e,o,s.type),_={...s,remainingAmount:s.remainingAmount-n,partialExits:[...s.partialExits,{price:e,amount:o,fee:r,pnl:u}]};_.remainingAmount<=0&&(_.isClosed=!0,s.assetUpdated||(c(-s.margin),_.assetUpdated=!0));let m=[...i];m[t]=_,l(m),d(e=>e+u-r)},remainingAmount:s.remainingAmount}),(0,a.jsx)("button",{className:x().deleteButton,onClick:()=>{s.partialExits.forEach(e=>{d(t=>t-e.pnl+e.fee)}),s.isClosed||(c(-s.margin),d(e=>e+s.margin)),o(t)},children:"포지션 삭제"}),s.partialExits.length>0&&(0,a.jsxs)("div",{className:x().exitHistory,children:[(0,a.jsx)("h4",{className:x().subtitle,children:"청산 내역"}),(0,a.jsxs)("table",{className:x().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"가격"}),(0,a.jsx)("th",{children:"금액 ($)"}),(0,a.jsx)("th",{children:"수수료 ($)"}),(0,a.jsx)("th",{children:"손익 ($)"}),(0,a.jsx)("th",{children:"액션"})]})}),(0,a.jsx)("tbody",{children:s.partialExits.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.price}),(0,a.jsx)("td",{children:e.amount.toFixed(2)}),(0,a.jsx)("td",{children:e.fee.toFixed(2)}),(0,a.jsx)("td",{children:e.pnl.toFixed(2)}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{className:x().deleteButton,onClick:()=>h(t),children:"삭제"})})]},t))})]})]}),s.isClosed&&(0,a.jsxs)("div",{className:x().pnlContainer,children:[(0,a.jsx)("p",{className:x().pnlLabel,children:"포지션 손익:"}),(0,a.jsxs)("p",{className:"".concat(x().pnlValue," ").concat(p()>=0?x().profit:x().loss),children:["$",p().toFixed(2)]})]})]})]})}var j=s(4466),g=s.n(j);function N(e){let{positions:t,updatePositions:s,leverage:n,updateUsedMargin:i,setCurrentAsset:l}=e,r=t.filter(e=>!e.isClosed),o=t.filter(e=>e.isClosed),c=e=>{let a=t[e];s(t.filter((t,s)=>s!==e)),i(-a.margin)};return(0,a.jsxs)("div",{className:g().container,children:[(0,a.jsx)("h2",{className:g().title,children:"포지션 목록"}),0===r.length?(0,a.jsx)("p",{className:g().emptyText,children:"오픈된 포지션이 없습니다."}):r.map((e,r)=>(0,a.jsx)(h,{index:t.indexOf(e),position:e,positions:t,updatePositions:s,leverage:n,deletePosition:c,updateUsedMargin:i,setCurrentAsset:l},r)),o.length>0&&(0,a.jsxs)("div",{className:g().closedPositions,children:[(0,a.jsx)("h3",{className:g().subtitle,children:"종료된 포지션"}),o.map((e,r)=>(0,a.jsx)(h,{index:t.indexOf(e),position:e,positions:t,updatePositions:s,leverage:n,deletePosition:c,updateUsedMargin:i,setCurrentAsset:l},r))]})]})}var b=s(6300),f=s.n(b);function v(e){let{positions:t,leverage:s,initialAsset:i,setCurrentAsset:l}=e,r=(()=>{let e=0,s=0,a=0;t.forEach(t=>{let n=0;t.partialExits.forEach(e=>{n+=e.pnl}),n-=t.fee,t.partialExits.forEach(e=>{n-=e.fee}),t.isClosed&&(e+=n,n>=0?s+=1:a+=1)});let n=s+a>0?s/(s+a)*100:0,l=i+e;return{totalPnL:e,wins:s,losses:a,winRate:n,finalAsset:l}})();return(0,n.useEffect)(()=>{l(r.finalAsset)},[r.finalAsset,l]),(0,a.jsxs)("div",{className:f().card,children:[(0,a.jsx)("h2",{className:f().title,children:"총 손익 및 통계"}),(0,a.jsxs)("div",{className:f().statItem,children:[(0,a.jsx)("span",{children:"총 손익:"}),(0,a.jsxs)("span",{className:"".concat(f().amount," ").concat(r.totalPnL>=0?f().profit:f().loss),children:["$",r.totalPnL.toFixed(2)]})]}),(0,a.jsxs)("div",{className:f().statItem,children:[(0,a.jsx)("span",{children:"승리 수:"}),(0,a.jsx)("span",{children:r.wins})]}),(0,a.jsxs)("div",{className:f().statItem,children:[(0,a.jsx)("span",{children:"패배 수:"}),(0,a.jsx)("span",{children:r.losses})]}),(0,a.jsxs)("div",{className:f().statItem,children:[(0,a.jsx)("span",{children:"승률:"}),(0,a.jsxs)("span",{children:[r.winRate.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:f().statItem,children:[(0,a.jsx)("span",{children:"최종 자산:"}),(0,a.jsxs)("span",{children:["$",r.finalAsset.toFixed(2)]})]})]})}var I=s(5717),P=s.n(I);function C(){let[e,t]=(0,n.useState)(1e3),[s,i]=(0,n.useState)(1e3),[l,o]=(0,n.useState)(1),[c,u]=(0,n.useState)(.032),[_,m]=(0,n.useState)([]),[p,x]=(0,n.useState)(0),[h,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=localStorage.getItem("backtesterData");if(e){let s=JSON.parse(e);t(s.initialAsset||1e3),i(s.currentAsset||s.initialAsset||1e3),o(s.leverage||1),u(s.feeRate||.1),m(s.positions||[]),x(s.usedMargin||0)}},[]),(0,n.useEffect)(()=>{localStorage.setItem("backtesterData",JSON.stringify({initialAsset:e,currentAsset:s,leverage:l,feeRate:c,positions:_,usedMargin:p}))},[e,s,l,c,_,p]);let g=()=>{t(1e3),i(1e3),o(1),u(.1),m([]),x(0),localStorage.removeItem("backtesterData")};return(0,a.jsxs)("div",{className:P().container,children:[(0,a.jsx)("h1",{className:P().title,children:"가상화폐 백테스트 계산기"}),(0,a.jsx)(r,{initialAsset:e,setInitialAsset:t,isTrading:h,startTrading:()=>{j(!0)},stopTrading:()=>{j(!1),g()},resetSettings:g}),h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{feeRate:c,setFeeRate:u,leverage:l,setLeverage:o,addPosition:e=>{m([..._,e]),x(t=>t+e.margin),i(t=>t-e.margin)},initialAsset:e,currentAsset:s,usedMargin:p}),(0,a.jsx)(N,{positions:_,updatePositions:e=>{m(e),x(e.reduce((e,t)=>e+t.margin,0))},leverage:l,updateUsedMargin:e=>{x(t=>t+e)},setCurrentAsset:i}),(0,a.jsx)(v,{positions:_,leverage:l,initialAsset:e,currentAsset:s,setCurrentAsset:i})]})]})}},7258:e=>{e.exports={container:"PartialExitForm_container__KCSlF",title:"PartialExitForm_title__tRCw2",formGroup:"PartialExitForm_formGroup__CDk7q",label:"PartialExitForm_label__rZC28",input:"PartialExitForm_input__rVQok",button:"PartialExitForm_button__sf0YC",rangeContainer:"PartialExitForm_rangeContainer__53qAK",rangeInput:"PartialExitForm_rangeInput__K9Q0x",rangeLabels:"PartialExitForm_rangeLabels__kYay0",percentageInputGroup:"PartialExitForm_percentageInputGroup__qL7E3",percentageInput:"PartialExitForm_percentageInput__dyf2i",percentageSymbol:"PartialExitForm_percentageSymbol__ITWIY",exitAmountInfo:"PartialExitForm_exitAmountInfo__9F651"}},5621:e=>{e.exports={card:"PositionItem_card__5lsbc",title:"PositionItem_title__td54O",subtitle:"PositionItem_subtitle__wiwpn",exitHistory:"PositionItem_exitHistory__RIGVR",table:"PositionItem_table__J1kVq",closedMessage:"PositionItem_closedMessage__0RwP0",pnlContainer:"PositionItem_pnlContainer__h7Pbl",pnlLabel:"PositionItem_pnlLabel__t9EO6",pnlValue:"PositionItem_pnlValue__s__3h",profit:"PositionItem_profit__Z_KHz",loss:"PositionItem_loss__G9m4D",deleteButton:"PositionItem_deleteButton__hGJsD",summary:"PositionItem_summary__DnCAw",details:"PositionItem_details__Qn0s2",closed:"PositionItem_closed__IjdpQ",open:"PositionItem_open__ahyrh"}},4466:e=>{e.exports={container:"PositionList_container__c97Oa",title:"PositionList_title__xKbjA",emptyText:"PositionList_emptyText__Cp4yA",closedPositions:"PositionList_closedPositions__osWi5",subtitle:"PositionList_subtitle__kzAxQ"}},1946:e=>{e.exports={card:"Settings_card__Ga0IN",title:"Settings_title__y3jk2",formGroup:"Settings_formGroup__E6_56",label:"Settings_label__nxs_r",input:"Settings_input__vaB7U",buttonGroup:"Settings_buttonGroup__or0a6",startButton:"Settings_startButton__vi5LB",resetButton:"Settings_resetButton__i2uuc",disabled:"Settings_disabled__tQkHO",stopButton:"Settings_stopButton__3IT4h"}},6300:e=>{e.exports={card:"TotalPnL_card__mM7f7",title:"TotalPnL_title__zNXCI",statItem:"TotalPnL_statItem__pe9ya",amount:"TotalPnL_amount__4L__I",profit:"TotalPnL_profit__7asan",loss:"TotalPnL_loss__sMs1H"}},748:e=>{e.exports={card:"TradeInput_card__QCqD8",title:"TradeInput_title__HYtWc",typeSelector:"TradeInput_typeSelector__JBL0K",typeButton:"TradeInput_typeButton__wJ8CT",long:"TradeInput_long__eA_jN",short:"TradeInput_short__j0OaS",selectedLong:"TradeInput_selectedLong__TXl6X",selectedShort:"TradeInput_selectedShort__5egKX",formGroup:"TradeInput_formGroup__cBCMf",label:"TradeInput_label__D3TFi",input:"TradeInput_input__jcX_m",maxInfo:"TradeInput_maxInfo__2q_xc",submitButton:"TradeInput_submitButton__4pxvT"}},5717:e=>{e.exports={container:"page_container__jZF7q",title:"page_title__po7na",resetButton:"page_resetButton__uvLeL"}}},e=>{var t=t=>e(e.s=t);e.O(0,[633,441,517,358],()=>t(9784)),_N_E=e.O()}]);